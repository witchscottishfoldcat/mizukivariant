import{s as g}from"./config.BNwZDY95.js";import{j as r,z as s,a as u,e as a}from"./zh_TW.ORda0UXz.js";const l=a,i={en:a,en_us:a,en_gb:a,en_au:a,zh_cn:u,zh_tw:s,ja:r,ja_jp:r};function c(t){const o=t.toLowerCase().replace(/-/g,"_");return typeof window<"u"&&console.log("getTranslation: 输入语言",t,"标准化后",o,"映射结果",i[o]?"找到":"未找到，使用默认"),i[o]||l}function f(t){if(!t)return null;const n=t.split(";").map(e=>e.trim()).find(e=>e.startsWith("language="));return n?n.split("=")[1]:null}function d(t){if(typeof window<"u"){if(window.__currentLanguage){const e=window.__currentLanguage;return console.log("getCurrentLanguage (客户端): 使用全局变量",e),e}const n=localStorage.getItem("language");if(n)return window.__currentLanguage=n,console.log("getCurrentLanguage (客户端): 使用localStorage",n),n;console.log("getCurrentLanguage (客户端): 使用默认语言",g.lang)}let o=t;if(!o&&typeof globalThis<"u")try{const n=globalThis.Astro;n?.request&&(o=n.request)}catch{}if(o){const n=o.headers.get("cookie"),e=f(n);if(console.log("getCurrentLanguage (服务端): Cookie头",n,"提取的语言",e),e)return e}return console.log("getCurrentLanguage (服务端): 使用默认语言",g.lang),g.lang||"en"}function L(t,o){const n=d(o),e=c(n)[t];return o&&typeof window>"u"&&console.log(`[服务端] i18n(${t}): 语言=${n}, 结果=${e}`),e}export{c as getTranslation,L as i18n};
