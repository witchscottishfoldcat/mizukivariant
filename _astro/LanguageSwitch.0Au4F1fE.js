const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/translation.BEYOwJ1L.js","_astro/config.BNwZDY95.js","_astro/zh_TW.ORda0UXz.js"])))=>i.map(i=>d[i]);
import{_ as re}from"./preload-helper.BlTxHScW.js";import{s as ie}from"./lifecycle.DavBjZBb.js";import{x as be,y as le,z as Te,A as Ne,h as A,d as fe,e as v,t as se,o as U,a as ce,p as _e,b as Ae,s as de,g,B as ge,r as _}from"./utils.DJr-jBEw.js";import{s as Be}from"./render.DfBNuYju.js";import{e as ke,i as Se}from"./each.CrZuCW-W.js";import"./config.BNwZDY95.js";import"./zh_TW.ORda0UXz.js";import{I as me}from"./Icon.3ByRVZCK.js";import"./if.C1JizXau.js";import"./props.C0ApMCPi.js";function ve(q,b){A(b,!g(b))}var De=(q,b,O)=>b(g(O).code),ze=fe("<button><!> <span> </span></button>"),Me=fe('<div class="language-switch-container relative z-50"><button aria-label="Language Switch" class="relative btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="language-switch"><div class="flex items-center justify-center"><!></div></button> <div role="menu" tabindex="-1"></div></div>');function Je(q,b){Ae(b,!0);const O=[{code:"en",name:"English"},{code:"zh_CN",name:"简体中文"}];function he(){if(typeof window<"u"&&window.__currentLanguage)return console.log("LanguageSwitch: 使用全局变量语言",window.__currentLanguage),window.__currentLanguage;const r=localStorage.getItem("language")||"en";return console.log("LanguageSwitch: 使用localStorage语言",r),r}let T=le(Te(he())),p=le(!1);function Ce(r){console.log("LanguageSwitch: 切换语言到",r),A(T,r,!0),localStorage.setItem("language",r),console.log("LanguageSwitch: 已设置localStorage",localStorage.getItem("language")),typeof window<"u"&&(window.__currentLanguage=r,console.log("LanguageSwitch: 已设置全局变量",window.__currentLanguage));const c=`language=${r}; path=/; max-age=${3600*24*365}; SameSite=Lax; Secure=false`;document.cookie=c,console.log("LanguageSwitch: 已设置Cookie",c),console.log("LanguageSwitch: 当前所有Cookie",document.cookie);const n=document.cookie.split(";").find(u=>u.trim().startsWith("language="));console.log("LanguageSwitch: Cookie验证",n),setTimeout(()=>{const u=document.cookie.split(";").find(C=>C.trim().startsWith("language="));console.log("LanguageSwitch: 延迟验证Cookie",u),(!u||!u.includes(r))&&(console.error("LanguageSwitch: Cookie设置失败！","期望:",r,"实际:",u),document.cookie=c,console.log("LanguageSwitch: 重试设置Cookie"))},50),document.documentElement.lang=r,console.log("LanguageSwitch: 已设置HTML lang属性",document.documentElement.lang),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("language-changed",{detail:{lang:r}})),console.log("LanguageSwitch: 已触发 language-changed 事件")),xe(),Ee(),console.log("LanguageSwitch: 语言切换完成，已更新所有文本（不刷新页面）")}function Ee(){const r=g(T);console.log("LanguageSwitch: 更新页面文本，语言:",r),re(async()=>{const{getTranslation:c}=await import("./translation.BEYOwJ1L.js");return{getTranslation:c}},__vite__mapDeps([0,1,2])).then(({getTranslation:c})=>{re(async()=>{const{default:n}=await import("./zh_TW.ORda0UXz.js").then(u=>u.i);return{default:n}},[]).then(({default:n})=>{const u=c(r);document.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");t&&u[t]&&(e.textContent=u[t])});const E=document.querySelector('widget-layout[data-id="categories"]');if(E){const e=E.querySelector(".font-bold");e&&u[n.categories]&&(e.textContent=u[n.categories])}const f=document.querySelector('widget-layout[data-id="tags"]');if(f){const e=f.querySelector(".font-bold");e&&u[n.tags]&&(e.textContent=u[n.tags])}const s=document.querySelector('widget-layout[data-id="announcement"]');if(s){const e=s.querySelector(".font-bold");e&&u[n.announcement]&&(e.textContent=u[n.announcement]);const t=s.querySelector("button[aria-label]");t&&u[n.announcementClose]&&t.setAttribute("aria-label",u[n.announcementClose]);const o={"Welcome to my blog! This is a sample announcement.":{en:"Welcome to my blog! This is a sample announcement.",zh_CN:"欢迎来到我的博客！这是一个示例公告。"}},a={};Object.values(o).forEach(l=>{a[l.zh_CN]=l.en});const i=s.querySelector(".text-neutral-600, .text-neutral-300");if(i){const l=i.textContent?.trim()||"";let h=null;o[l]?h=o[l][r]||o[l].en:r==="en"&&a[l]&&(h=a[l]),h&&h!==l&&(i.textContent=h)}const d={"Learn More":{en:"Learn More",zh_CN:"了解更多"}},x={};Object.values(d).forEach(l=>{x[l.zh_CN]=l.en});const F=s.querySelector("a.btn-regular");if(F){const l=F.textContent?.trim()||"";let h=null;d[l]?h=d[l][r]||d[l].en:r==="en"&&x[l]&&(h=x[l]),h&&h!==l&&(F.textContent=h)}}document.querySelectorAll(".expand-btn button").forEach(e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let o=t.nextNode();for(;o!==null;){const a=o.textContent?.trim();if(a&&(a.toLowerCase().includes("more")||a==="更多"||a===u[n.more]||["More","更多","もっと","Más","Mehr"].some(i=>a===i))&&u[n.more]){o.textContent=u[n.more];break}o=t.nextNode()}}),document.querySelectorAll("widget-layout").forEach(e=>{const t=e.querySelector(".font-bold");if(t){const o=e.getAttribute("data-id");o==="categories"&&u[n.categories]?t.textContent=u[n.categories]:o==="tags"&&u[n.tags]?t.textContent=u[n.tags]:o==="announcement"&&u[n.announcement]&&(t.textContent=u[n.announcement])}}),document.querySelectorAll(".text-50, .text-75, .text-90, .text-sm").forEach(e=>{const t=e.textContent||"",o=t.match(/(\d+)\s+(word|words|字)\b/i);if(o){const a=Number.parseInt(o[1],10),i=a>1?u[n.wordsCount]:u[n.wordCount];if(i){const d=t.replace(/(\d+)\s+(word|words|字)\b/gi,`${a} ${i}`);if(d!==t)if(e.childNodes.length===1&&e.firstChild?.nodeType===Node.TEXT_NODE)e.textContent=d;else{const x=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let F=x.nextNode();for(;F!==null;){const l=F.textContent||"";if(l.match(/(\d+)\s+(word|words|字)\b/i)){const h=l.match(/(\d+)\s+(word|words|字)\b/i);if(h){const ue=Number.parseInt(h[1],10),ae=ue>1?u[n.wordsCount]:u[n.wordCount];ae&&(F.textContent=l.replace(/(\d+)\s+(word|words|字)\b/gi,`${ue} ${ae}`))}break}F=x.nextNode()}}}}}),document.querySelectorAll(".text-50, .text-75, .text-90").forEach(e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let o=t.nextNode();for(;o!==null;){const a=o.textContent?.trim();(a==="Uncategorized"||a==="未分类")&&u[n.uncategorized]&&(o.textContent=u[n.uncategorized]),o=t.nextNode()}}),document.querySelectorAll(".text-50, .text-75").forEach(e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let o=t.nextNode();for(;o!==null;){const a=o.textContent?.trim();(a==="No Tags"||a==="无标签")&&u[n.noTags]&&(o.textContent=u[n.noTags]),o=t.nextNode()}});const we={"Previous Page":r==="zh_CN"?"上一页":"Previous Page","Next Page":r==="zh_CN"?"下一页":"Next Page","Go to About Page":r==="zh_CN"?"前往关于页面":"Go to About Page","Display Settings":r==="zh_CN"?"显示设置":"Display Settings",Menu:r==="zh_CN"?"菜单":"Menu","Back to Top":r==="zh_CN"?"返回顶部":"Back to Top","Search Panel":r==="zh_CN"?"搜索面板":"Search Panel","Table of Contents":u[n.tableOfContents]||"Table of Contents","Close TOC":r==="zh_CN"?"关闭目录":"Close TOC"};document.querySelectorAll("[aria-label]").forEach(e=>{const t=e.getAttribute("aria-label");if(t){for(const[a,i]of Object.entries(we))if(t===a){e.setAttribute("aria-label",i);break}const o=t.match(/^Page (\d+)$/);o&&r==="zh_CN"&&e.setAttribute("aria-label",`第 ${o[1]} 页`)}}),document.querySelectorAll("input[placeholder], textarea[placeholder]").forEach(e=>{const t=e.placeholder;t&&t==="Search"&&u[n.search]&&(e.placeholder=u[n.search])});const Y=document.querySelector(".card-base");if(Y){const e=document.createTreeWalker(Y,NodeFilter.SHOW_TEXT,null);let t=e.nextNode();for(;t!==null;){const o=t.textContent||"",a=o.match(/(\d+)\s+(post|posts|篇文章)\b/i);if(a){const i=Number.parseInt(a[1],10),d=i>1?u[n.postsCount]:u[n.postCount];d&&(t.textContent=o.replace(/(\d+)\s+(post|posts|篇文章)\b/gi,`${i} ${d}`))}t=e.nextNode()}}const D={"Markdown Tutorial":{en:"Markdown Tutorial",zh_CN:"Markdown 教程"},"Encrypted Post":{en:"Encrypted Post",zh_CN:"加密文章"},"Markdown Extended Features":{en:"Markdown Extended Features",zh_CN:"Markdown 扩展功能"},"Simple Guides for Mizuki":{en:"Simple Guides for Mizuki",zh_CN:"Mizuki 简单指南"},"Cover Image of the Post":{en:"Cover Image of the Post",zh_CN:"文章封面图片"},"Markdown Mermaid":{en:"Markdown Mermaid",zh_CN:"Markdown Mermaid"},"Include Video in the Posts":{en:"Include Video in the Posts",zh_CN:"在文章中嵌入视频"},"Draft Example":{en:"Draft Example",zh_CN:"草稿示例"}},H={};Object.values(D).forEach(e=>{H[e.zh_CN]=e.en});function Z(e,t){if(D[e])return D[e][t]||null;if(t==="en"&&H[e])return H[e];if(t==="en"){for(const[o,a]of Object.entries(D))if(a.zh_CN===e)return o}return null}const z={"A simple example of a Markdown blog post.":{en:"A simple example of a Markdown blog post.",zh_CN:"一个简单的 Markdown 博客文章示例。"},"A simple example of a Markdown blog post with Mermaid.":{en:"A simple example of a Markdown blog post with Mermaid.",zh_CN:"一个包含 Mermaid 图表的 Markdown 博客文章示例。"},"Read more about Markdown features in Mizuki":{en:"Read more about Markdown features in Mizuki",zh_CN:"了解更多关于 Mizuki 中的 Markdown 功能"},"This is an article for testing the page encryption feature":{en:"This is an article for testing the page encryption feature",zh_CN:"这是一篇用于测试页面加密功能的文章"},"This post demonstrates how to include embedded video in a blog post.":{en:"This post demonstrates how to include embedded video in a blog post.",zh_CN:"这篇文章演示了如何在博客文章中嵌入视频。"},"This article is currently in a draft state and is not published. Therefore, it will not be visible to the general audience. The content is still a work in progress and may require further editing and review.":{en:"This article is currently in a draft state and is not published. Therefore, it will not be visible to the general audience. The content is still a work in progress and may require further editing and review.",zh_CN:"这篇文章目前处于草稿状态，尚未发布。因此，它不会对普通观众可见。内容仍在进行中，可能需要进一步编辑和审查。"},"How to use this blog template.":{en:"How to use this blog template.",zh_CN:"如何使用这个博客模板。"}},$={};Object.values(z).forEach(e=>{$[e.zh_CN]=e.en});function I(e,t){if(z[e])return z[e][t]||null;if(t==="en"&&$[e])return $[e];if(t==="en"){for(const[o,a]of Object.entries(z))if(a.zh_CN===e)return o}return null}[".card-base a.text-3xl",".card-base .text-3xl","h1",".text-\\[2\\.25rem\\]","[data-pagefind-meta='title']"].forEach(e=>{try{document.querySelectorAll(e).forEach(o=>{const a=o.textContent?.trim()||"";if(a){const i=Z(a,r);i&&i!==a&&(o.textContent=i)}})}catch(t){console.warn("LanguageSwitch: 标题选择器错误",e,t)}});const K=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);let M=K.nextNode();for(;M!==null;){const e=M.textContent?.trim()||"";if(e){const t=Z(e,r);t&&t!==e&&(M.textContent=t)}M=K.nextNode()}[".card-base .text-75",".line-clamp-2",".line-clamp-1"].forEach(e=>{try{document.querySelectorAll(e).forEach(o=>{const a=o.textContent?.trim()||"";if(a){const i=I(a,r);i&&i!==a&&(o.textContent=i)}})}catch(t){console.warn("LanguageSwitch: 描述选择器错误",e,t)}});const ee=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);let y=ee.nextNode();for(;y!==null;){const e=y.textContent?.trim()||"";if(e){const t=I(e,r);t&&t!==e&&(y.textContent=t)}y=ee.nextNode()}const X={Search:n.search,Categories:n.categories,Tags:n.tags,Announcement:n.announcement,More:n.more,Home:n.home,About:n.about,Archive:n.archive,Friends:n.friends,Anime:n.anime,Diary:n.diary,Albums:n.albums,Projects:n.projects,Skills:n.skills,Timeline:n.timeline},R={};Object.entries(X).forEach(([e,t])=>{const o=u[t];o&&(R[o]=e)});const S={Examples:{en:"Examples",zh_CN:"示例"},Guides:{en:"Guides",zh_CN:"指南"},Technology:{en:"Technology",zh_CN:"技术"}},G={};Object.values(S).forEach(e=>{G[e.zh_CN]=e.en});function V(e,t){if(S[e])return S[e][t]||null;if(t==="en"&&G[e])return G[e];if(t==="en"){for(const[o,a]of Object.entries(S))if(a.zh_CN===e)return o}return null}const te=document.querySelector('widget-layout[data-id="categories"]');te&&te.querySelectorAll("a button").forEach(t=>{const o=t.querySelector("div.overflow-hidden.text-left");if(o){const a=o.textContent?.trim()||"";if(a){const i=V(a,r);if(i&&i!==a){const d=document.createTreeWalker(o,NodeFilter.SHOW_TEXT,null);let x=d.nextNode();for(;x!==null;){if(x.textContent?.trim()===a){x.textContent=i;break}x=d.nextNode()}}}}}),[".link-lg",".text-50"].forEach(e=>{try{document.querySelectorAll(e).forEach(o=>{const a=o.textContent?.trim()||"";if(a){const i=V(a,r);i&&i!==a&&(o.textContent=i)}})}catch(t){console.warn("LanguageSwitch: 分类选择器错误",e,t)}});const ne=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);let L=ne.nextNode();for(;L!==null;){const e=L.textContent?.trim()||"";if(e){let t=V(e,r);if(!t){for(const[o,a]of Object.entries(S))if(e.startsWith(o)||e.startsWith(a.zh_CN)){const i=e.match(/\s+(\d+)$/),d=i?i[0]:"";r==="zh_CN"?t=a.zh_CN+d:t=a.en+d;break}}t&&t!==e&&(L.textContent=t)}L=ne.nextNode()}const oe=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);let W=oe.nextNode();for(;W!==null;){const e=W.textContent?.trim()||"";if(e){let t=null;if(X[e]){const o=X[e];t=u[o]}else r==="en"&&R[e]&&(t=R[e]);t&&t!==e&&(W.textContent=t)}W=oe.nextNode()}console.log("LanguageSwitch: 页面文本更新完成")})}).catch(c=>{console.error("LanguageSwitch: 无法加载翻译模块",c)})}function xe(){const r=g(T);console.log("LanguageSwitch: 更新导航栏文本，语言:",r);const c={Home:{en:"Home",zh_CN:"主页"},About:{en:"About",zh_CN:"关于"},Archive:{en:"Archive",zh_CN:"归档"},Friends:{en:"Friends",zh_CN:"友链"},Anime:{en:"Anime",zh_CN:"追番"},Diary:{en:"Diary",zh_CN:"日记"},Albums:{en:"Albums",zh_CN:"相册"},Projects:{en:"Projects",zh_CN:"项目"},Skills:{en:"Skills",zh_CN:"技能"},Timeline:{en:"Timeline",zh_CN:"时间线"}},n=(u,C,E,f)=>{const s=document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null);let N=s.nextNode();for(;N!==null;){const w=N.textContent?.trim();if(w===C||w===E)return N.textContent=f,!0;N=s.nextNode()}const j=u.querySelectorAll("span");for(const w of j){const m=w.textContent?.trim();if(m===C||m===E)return w.textContent=f,!0}return!1};for(const[u,C]of Object.entries(c)){const E=C[r]||C.en,f=C.en,s=C.zh_CN;document.querySelectorAll("#navbar button, #navbar a").forEach(m=>{(m.textContent?.trim().includes(f)||m.textContent?.trim().includes(s))&&n(m,f,s,E)}),document.querySelectorAll("#nav-menu-panel button, #nav-menu-panel a").forEach(m=>{(m.textContent?.trim().includes(f)||m.textContent?.trim().includes(s))&&n(m,f,s,E)}),document.querySelectorAll(".dropdown-item").forEach(m=>{(m.textContent?.trim().includes(f)||m.textContent?.trim().includes(s))&&n(m,f,s,E)})}console.log("LanguageSwitch: 导航栏文本更新完成")}function pe(){switch(g(T)){case"en":return"circle-flags:us";case"zh_CN":return"circle-flags:cn";default:return"circle-flags:us"}}typeof window<"u"&&Ne(()=>{document.documentElement.lang=g(T)}),typeof document<"u"&&document.addEventListener("click",r=>{r.target.closest(".language-switch-container")||A(p,!1)});var P=Me(),B=v(P);B.__click=[ve,p];var J=v(B),Fe=v(J);{let r=ge(pe);me(Fe,{get icon(){return g(r)},class:"text-[1.25rem]"})}_(J),_(B);var k=de(B,2);let Q;ke(k,21,()=>O,Se,(r,c)=>{var n=ze();let u;n.__click=[De,Ce,c];var C=v(n);{let s=ge(()=>g(c).code==="en"?"circle-flags:us":"circle-flags:cn");me(C,{get icon(){return g(s)},class:"text-[1rem]"})}var E=de(C,2),f=v(E,!0);_(E),_(n),se(s=>{u=ie(n,1,"w-full text-left px-4 py-2 text-sm hover:bg-[var(--hover-bg)] first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",null,u,s),Be(f,g(c).name)},[()=>({"bg-[var(--hover-bg)]":g(T)===g(c).code})]),ce(r,n)}),_(k),_(P),se(r=>Q=ie(k,1,"absolute right-0 mt-2 w-40 rounded-lg shadow-lg bg-[var(--card-bg)] border border-[var(--border-color)] transition-all duration-200 z-50",null,Q,r),[()=>({"opacity-0":!g(p),invisible:!g(p),"opacity-100":g(p),visible:g(p)})]),U("mouseenter",B,()=>A(p,!0)),U("mouseleave",k,()=>A(p,!1)),U("mouseenter",k,()=>A(p,!0)),ce(q,P),_e()}be(["click"]);export{Je as default};
