import{s as _}from"./lifecycle.DoqESVdT.js";import{x as b,y as N,g as t,h as n,d as D,t as L,o as s,a as E,e as g,s as S,z as x,r as o}from"./utils.jfpyogJ2.js";import{s as T}from"./render.Cb6RcseD.js";import{e as j,i as H}from"./each.CrzLm-2G.js";import"./config.BNwZDY95.js";import"./zh_TW.Jbo5k0IW.js";import{I as F}from"./Icon.NtChqxQO.js";import"./if.BinQWGk-.js";import"./props.D_m-1XEU.js";var M=D("<button><!> <span> </span></button>"),O=D('<div class="language-switch-container relative z-50"><button aria-label="Language Switch" class="relative btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="language-switch"><div class="flex items-center justify-center"><!></div></button> <div></div></div>');function W(B){const y=[{code:"en",name:"English"},{code:"zh_CN",name:"简体中文"}];function C(){if(typeof window<"u"&&window.__currentLanguage)return console.log("LanguageSwitch: 使用全局变量语言",window.__currentLanguage),window.__currentLanguage;const e=localStorage.getItem("language")||"en";return console.log("LanguageSwitch: 使用localStorage语言",e),e}let c=b(N(C())),a=b(!1);function z(e){console.log("LanguageSwitch: 切换语言到",e),n(c,e,!0),localStorage.setItem("language",e),console.log("LanguageSwitch: 已设置localStorage",localStorage.getItem("language")),typeof window<"u"&&(window.__currentLanguage=e,console.log("LanguageSwitch: 已设置全局变量",window.__currentLanguage)),document.cookie=`language=${e}; path=/; max-age=${3600*24*365}; SameSite=Lax`,document.documentElement.lang=e,console.log("LanguageSwitch: 已设置HTML lang属性",document.documentElement.lang),setTimeout(()=>{console.log("LanguageSwitch: 重新加载页面"),window.location.reload()},100)}function I(){n(a,!t(a))}function k(){switch(t(c)){case"en":return"flag:us-1";case"zh_CN":return"flag:cn-1";default:return"flag:us-1"}}typeof window<"u"&&(document.documentElement.lang=t(c)),typeof document<"u"&&document.addEventListener("click",e=>{e.target.closest(".language-switch-container")||n(a,!1)});var d=O(),u=g(d),f=g(u),A=g(f);{let e=x(k);F(A,{get icon(){return t(e)},class:"text-[1.25rem]"})}o(f),o(u);var r=S(u,2);let w;j(r,21,()=>y,H,(e,i)=>{var l=M();let v;var p=g(l);{let m=x(()=>t(i).code==="en"?"flag:us-1":"flag:cn-1");F(p,{get icon(){return t(m)},class:"text-[1rem]"})}var h=S(p,2),$=g(h,!0);o(h),o(l),L(m=>{v=_(l,1,"w-full text-left px-4 py-2 text-sm hover:bg-[var(--hover-bg)] first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",null,v,m),T($,t(i).name)},[()=>({"bg-[var(--hover-bg)]":t(c)===t(i).code})]),s("click",l,()=>z(t(i).code)),E(e,l)}),o(r),o(d),L(e=>w=_(r,1,"absolute right-0 mt-2 w-40 rounded-lg shadow-lg bg-[var(--card-bg)] border border-[var(--border-color)] transition-all duration-200 z-50",null,w,e),[()=>({"opacity-0":!t(a),invisible:!t(a),"opacity-100":t(a),visible:t(a)})]),s("click",u,I),s("mouseenter",u,()=>n(a,!0)),s("mouseleave",r,()=>n(a,!1)),s("mouseenter",r,()=>n(a,!0)),E(B,d)}export{W as default};
